// ğŸ““ SYED'S FINAL EXPRESS + TYPESCRIPT SERVER SETUP NOTES

// âœ… 1. Project Init
// Run this in root folder
npm init -y

// âœ… 2. Install Dependencies
npm i express config mongoose
npm i -D typescript ts-node nodemon @types/node @types/express @types/config @types/mongoose

// âœ… 3. tsconfig.json Setup
// Make sure this is clean and future-proof
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ES2020",
    "moduleResolution": "bundler", // âœ… TS 5.9+ safe
    "rootDir": "./src",
    "outDir": "./dist",
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "skipLibCheck": true,
    "types": ["node"],
    "verbatimModuleSyntax": false
  },
  "include": ["src"]
}

// âœ… 4. package.json Tweaks
// Set type and main correctly
"type": "module",
"main": "dist/app.js",
"scripts": {
  "dev": "nodemon",
  "build": "tsc",
  "start": "node dist/app.js"
}

// âœ… 5. nodemon.json Setup
// Create in root folder
{
  "watch": ["src"],
  "ext": "ts",
  "exec": "node --loader ts-node/esm src/app.ts"
}

// âœ… 6. app.ts (Minimal Express Server)
import express, { Application, Request, Response } from "express";

const app: Application = express();
const PORT: number = 8080;

app.use(express.json());

app.get("/", (req: Request, res: Response): void => {
  res.send("ğŸ”¥ Express + TypeScript server is running!");
});

app.listen(PORT, (): void => {
  console.log(`ğŸš€ Server started on http://localhost:${PORT}`);
});

// âœ… 7. Common Mistakes to Avoid
// âŒ Wrong path in nodemon.json â†’ double 'server/server'
// âŒ Missing ts-node â†’ install with: npm i -D ts-node
// âŒ Deprecated moduleResolution â†’ use "bundler" in TS 5.9+
// âŒ Forgetting "type": "module" â†’ breaks import/export
// âŒ Using .ts in "main" â†’ always point to compiled .js

// âœ… 8. Run Dev Server
npm run dev

// âœ… 9. Build for Production
npm run build
npm run start


// keep config folder out of src folder :
ğŸ“ Correct config path:
server/
â””â”€â”€ config/
    â””â”€â”€ default.json

// ğŸ”¥ You're now running a clean, typed, scalable Express server in TypeScript.